<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pay Auditor</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-4">
    <div class="max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden p-6">
        <h2 class="text-2xl font-bold text-center mb-6">Pay Auditor</h2>

        <div class="space-y-4">
            <div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg">
                <span class="font-semibold text-blue-900">Extra Board Operator?</span>
                <input type="checkbox" id="isXB" class="w-6 h-6">
            </div>

            <div class="border p-3 rounded-lg bg-gray-50">
                <h3 class="font-bold mb-2 text-sm uppercase">Part 1</h3>
                <div class="grid grid-cols-2 gap-2">
                    <div>
                        <label class="block text-xs">Start Time</label>
                        <input type="time" id="start1" class="w-full border p-2 rounded">
                    </div>
                    <div>
                        <label class="block text-xs">End Time</label>
                        <input type="time" id="end1" class="w-full border p-2 rounded">
                    </div>
                </div>
            </div>

            <div class="border p-3 rounded-lg bg-gray-50">
                <h3 class="font-bold mb-2 text-sm uppercase">Part 2</h3>
                <div class="grid grid-cols-2 gap-2">
                    <div>
                        <label class="block text-xs">Start Time</label>
                        <input type="time" id="start2" class="w-full border p-2 rounded">
                    </div>
                    <div>
                        <label class="block text-xs">End Time</label>
                        <input type="time" id="end2" class="w-full border p-2 rounded">
                    </div>
                </div>
            </div>

            <button onclick="calculatePay()" class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg hover:bg-blue-700 transition">Calculate</button>

            <div id="results" class="mt-4 p-4 bg-yellow-50 rounded-lg hidden text-sm space-y-2">
                <div class="flex justify-between border-b pb-1"><span>Work (PLL):</span> <span id="workOut" class="font-mono">0.00</span></div>
                <div class="flex justify-between border-b pb-1"><span>Overtime (SOT):</span> <span id="otOut" class="font-mono">0.00</span></div>
                <div class="flex justify-between border-b pb-1"><span>Spread (SPR):</span> <span id="spreadOut" class="font-mono">0.00</span></div>
                <div class="flex justify-between pt-2 text-lg font-bold"><span>Total Units:</span> <span id="totalOut">0.00</span></div>
            </div>
        </div>
    </div>

    <script>
        function toDecimal(timeStr) {
            if (!timeStr) return 0;
            const [hrs, mins] = timeStr.split(':').map(Number);
            return hrs + (mins / 60);
        }

        function calculatePay() {
            const isXB = document.getElementById('isXB').checked;
            const s1 = toDecimal(document.getElementById('start1').value);
            const e1 = toDecimal(document.getElementById('end1').value);
            const s2 = toDecimal(document.getElementById('start2').value);
            const e2 = toDecimal(document.getElementById('end2').value);

            let piece1 = e1 > s1 ? e1 - s1 : (e1 + 24) - s1;
            let piece2 = e2 > s2 ? e2 - s2 : (e2 + 24) - s2;
            let actualWork = piece1 + piece2;

            let workPay = Math.max(8, actualWork);
            let sot = Math.max(0, actualWork - 8);

            let totalSpan = e2 > s1 ? e2 - s1 : (e2 + 24) - s1;
            let adjustedSpan = totalSpan - 0.25;
            let spreadPremium = 0;

            if (adjustedSpan > 10.5) {
                let spreadTime = adjustedSpan - 10.5;
                if (isXB) {
                    spreadTime = Math.min(0.5, spreadTime);
                }
                spreadPremium = spreadTime * 0.5;
            }

            document.getElementById('workOut').innerText = workPay.toFixed(2);
            document.getElementById('otOut').innerText = (sot * 0.5).toFixed(2);
            document.getElementById('spreadOut').innerText = spreadPremium.toFixed(2);
            document.getElementById('totalOut').innerText = (workPay + (sot * 0.5) + spreadPremium).toFixed(2);
            document.getElementById('results').classList.remove('hidden');
        }
    </script>
</body>
</html>
